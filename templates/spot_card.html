<div class="spot-card" id="spot-{{ spot.id }}">
    <a href="/skate-spots/{{ spot.id }}" class="spot-card-link">
        <div class="spot-card-image">
            {% if spot.photos %}
                <img src="{{ spot.photos[0].url }}" alt="Photo of {{ spot.name }}" loading="lazy">
            {% else %}
                <div class="spot-card-placeholder">
                    <span class="placeholder-icon">üõπ</span>
                </div>
            {% endif %}
        </div>

        <div class="spot-card-content">
            <h3 class="spot-card-title">{{ spot.name }}</h3>

            <div class="spot-card-location">
                üìç {{ spot.location.city }}, {{ spot.location.country }}
            </div>

            <div class="spot-card-meta">
                <span class="badge badge-type">{{ spot.spot_type|format_spot_type }}</span>
                <span class="badge badge-difficulty {{ spot.difficulty }}">{{ spot.difficulty|format_difficulty }}</span>
            </div>

            {% if spot.average_rating %}
            <div class="spot-card-rating">
                <span class="rating-stars">
                    {% for i in range(5) %}
                        {% if i < spot.average_rating|round|int %}‚òÖ{% else %}‚òÜ{% endif %}
                    {% endfor %}
                </span>
                <span class="rating-count">({{ spot.ratings_count }})</span>
            </div>
            {% endif %}
        </div>
    </a>

    <div class="spot-card-favorite">
        {% set is_favorite = spot.id in favorite_spot_ids %}
        {% with spot_id=spot.id, is_favorite=is_favorite, current_user=current_user %}
            {% include "partials/favorite_button.html" %}
        {% endwith %}
    </div>
</div>
