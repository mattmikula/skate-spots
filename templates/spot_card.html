<div class="spot-card" id="spot-{{ spot.id }}">
    <h3>{{ spot.name }}</h3>
    <p>{{ spot.description }}</p>

    <div class="spot-meta">
        <span class="badge badge-type">{{ spot.spot_type }}</span>
        <span class="badge badge-difficulty {{ spot.difficulty }}">{{ spot.difficulty }}</span>
    </div>

    <div style="margin: 0.5rem 0; font-size: 0.9rem; color: #666;">
        <div>📍 {{ spot.location.city }}, {{ spot.location.country }}</div>
        {% if spot.location.address %}
        <div>{{ spot.location.address }}</div>
        {% endif %}
    </div>

    <div style="font-size: 0.85rem; color: #777; margin-top: 0.5rem;">
        {% if spot.is_public %}✅ Public{% else %}🔒 Private{% endif %}
        {% if spot.requires_permission %} • ⚠️ Permission required{% endif %}
    </div>

    {% set is_favorite = spot.id in favorite_spot_ids %}
    {% with spot_id=spot.id, is_favorite=is_favorite, current_user=current_user %}
        {% include "partials/favorite_button.html" %}
    {% endwith %}

    <div
        class="spot-rating-container"
        hx-get="/skate-spots/{{ spot.id }}/rating-section"
        hx-trigger="load"
        hx-target="this"
        hx-swap="outerHTML"
    >
        <div class="rating-summary">Loading rating details...</div>
    </div>

    <div class="spot-actions">
        <a href="/skate-spots/{{ spot.id }}/edit" class="btn btn-edit">Edit</a>
        <button
            hx-delete="/api/v1/skate-spots/{{ spot.id }}"
            hx-confirm="Are you sure you want to delete this spot?"
            hx-target="#spot-{{ spot.id }}"
            hx-swap="outerHTML swap:0.5s"
            class="btn btn-delete">
            Delete
        </button>
    </div>
</div>
