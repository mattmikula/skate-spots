<!-- Follow/Unfollow button -->
{% if current_user and current_user.username != target_username %}
    {% if is_following %}
        <button class="btn btn-secondary"
                hx-delete="/api/v1/users/{{ target_username }}/follow"
                hx-target="this"
                hx-swap="outerHTML"
                hx-indicator=".loading">
            <span class="htmx-indicator loading">...</span>
            <span>Following</span>
        </button>
    {% else %}
        <button class="btn btn-primary"
                hx-post="/api/v1/users/{{ target_username }}/follow"
                hx-target="this"
                hx-swap="outerHTML"
                hx-indicator=".loading">
            <span class="htmx-indicator loading">...</span>
            <span>Follow</span>
        </button>
    {% endif %}
{% endif %}

<style>
    .btn {
        padding: 0.5rem 1rem;
        border: 2px solid;
        border-radius: 0.25rem;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-primary {
        background-color: #667eea;
        color: white;
        border-color: #667eea;
    }

    .btn-primary:hover {
        background-color: #5568d3;
        border-color: #5568d3;
    }

    .btn-secondary {
        background-color: white;
        color: #667eea;
        border-color: #667eea;
    }

    .btn-secondary:hover {
        background-color: #f5f5f5;
    }

    .loading {
        display: inline-block;
        animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>
