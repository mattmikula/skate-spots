{% extends "spots/base.html" %}

{% block title %}Map - Skate Spots{% endblock %}

{% block content %}
<div class="map-container">
    <h2>Skate Spots Map</h2>
    <div id="map" style="height: 600px; width: 100%;"></div>
</div>

<script>
    // Initialize map
    const map = L.map('map').setView([40.7128, -74.0060], 4);
    
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);
    
    // Fetch and display spots
    fetch('/api/v1/skate-spots/geojson/')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                onEachFeature: function(feature, layer) {
                    const props = feature.properties;
                    layer.bindPopup(`
                        <strong>${props.name}</strong><br>
                        ${props.description}<br>
                        <em>${props.spot_type} - ${props.difficulty}</em><br>
                        ${props.city}, ${props.country}
                    `);
                }
            }).addTo(map);
        });
</script>
{% endblock %}
